stages:
  - build  
  - test

build_job:
  stage: build
  only:
    - branches
  script:
    - 'cd ConsoleApp1'
    - '"C:\Tools\Nuget\nuget.exe" restore'
    - '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\15.0\Current\MSBuild.exe" ConsoleApp1.sln'  
  artifacts:
    paths:
      - 'ConsoleApp1\ConsoleApp1\bin\Debug\ConsoleApp1.exe'

      
 
test_job:
  stage: test
  script:
  - echo "Starting tests ..."
  - cd "ConsoleApp1\UnitTestProject1\bin\Debug"  
  - '"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe" UnitTestProject1.dll'